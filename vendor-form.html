<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Application - The Heirloom Store</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Signature Pad Library -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

    <!-- Custom Styles & Colors -->
    <style>
        :root {
            --bg-parchment: #F5F0E6;
            --text-charcoal: #2D2D2D;
            --accent-rose-gold: #B76E79;
            --accent-sage: #A9B4A8;
            --accent-mauve: #C7B0B6;
        }
        body {
            background-color: var(--bg-parchment);
            color: var(--text-charcoal);
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
        }
        /* Form Styles */
        .form-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--accent-mauve);
            border-radius: 0.5rem;
            background-color: #fff;
        }
        .terms-box {
            height: 300px;
            overflow-y: scroll;
            border: 1px solid var(--accent-mauve);
            padding: 1rem;
            background-color: #fff;
            border-radius: 0.5rem;
        }
        .signature-pad-container {
            border: 1px solid var(--accent-mauve);
            border-radius: 0.5rem;
            background-color: #fff;
        }
    </style>
</head>
<body class="bg-parchment">
    <div class="container mx-auto px-6 py-16">
        <h1 class="text-4xl font-bold text-center mb-4">Vendor & Consignment Application</h1>
        <p class="text-center text-lg mb-12">Thank you for your interest in joining The Heirloom Store family!</p>
        
        <!-- This is no longer a traditional form, but a container for our fields -->
        <div id="application-form" class="max-w-4xl mx-auto bg-white/50 p-8 rounded-lg shadow-lg space-y-8 backdrop-blur-sm">

            <!-- Page 1: Applicant Info -->
            <fieldset class="space-y-6">
                <legend class="text-2xl font-bold mb-4 border-b-2" style="border-color: var(--accent-rose-gold);">Applicant Information</legend>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="first-name" class="form-label">First Name</label>
                        <input type="text" id="first-name" name="First Name" class="form-input" required>
                    </div>
                    <div>
                        <label for="last-name" class="form-label">Last Name</label>
                        <input type="text" id="last-name" name="Last Name" class="form-input" required>
                    </div>
                </div>
                <div>
                    <label for="business-name" class="form-label">Business Name (if applicable)</label>
                    <input type="text" id="business-name" name="Business Name" class="form-input">
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="email" class="form-label">Your Email Address</label>
                        <input type="email" id="email" name="Email" class="form-input" required>
                    </div>
                    <div>
                        <label for="email-confirm" class="form-label">Confirm Email</label>
                        <input type="email" id="email-confirm" name="Email Confirm" class="form-input" required>
                    </div>
                </div>
                <div>
                     <label for="phone" class="form-label">Your Phone</label>
                     <input type="tel" id="phone" name="Phone" class="form-input" required>
                </div>
                <div>
                    <label class="form-label">Preferred Contact Method</label>
                    <select id="contact-method" name="Contact Method" class="form-input">
                        <option>Phone</option>
                        <option>Email</option>
                        <option>Facebook</option>
                        <option>Other</option>
                    </select>
                </div>
                 <div>
                    <label class="form-label">Best Time To Call You</label>
                    <select id="call-time" name="Best Time to Call" class="form-input">
                        <option>Mornings</option>
                        <option>Early Afternoon</option>
                        <option>Late Afternoon</option>
                        <option>Early Evening</option>
                    </select>
                </div>
                 <div>
                    <label for="website" class="form-label">Website or Social Media (if applicable)</label>
                    <input type="url" id="website" name="Website" class="form-input" placeholder="https://">
                </div>
            </fieldset>

            <!-- Page 2: Vendor/Consignment Info -->
            <fieldset class="space-y-6 pt-8 border-t" style="border-color: var(--accent-mauve);">
                <legend class="text-2xl font-bold mb-4 border-b-2" style="border-color: var(--accent-rose-gold);">Vendor Booth or Consignment</legend>
                <div>
                    <label class="form-label">I'm Applying For:</label>
                    <select id="applying-for" name="Applying For" class="form-input">
                        <option>Vendor Booth</option>
                        <option>Consignment Opportunity</option>
                        <option>Both</option>
                        <option>Other</option>
                    </select>
                </div>
                <div>
                    <label for="experience" class="form-label">Previous Vendor Experience</label>
                    <textarea id="experience" name="Experience" rows="4" class="form-input" placeholder="Please list previous locations, dates, and reason for leaving. If none, please indicate N/A."></textarea>
                </div>
                <div>
                    <label for="product-info" class="form-label">Product Information</label>
                    <textarea id="product-info" name="Product Info" rows="6" class="form-input" placeholder="Describe your products, price range, and any special needs like electricity or display fixtures."></textarea>
                </div>
                
                <!-- Highlighted section for emailing photos -->
                <div class="p-4 rounded-lg" style="background-color: var(--accent-sage); color: white;">
                    <h4 class="font-bold text-lg">Submitting Product Photos</h4>
                    <p class="mt-2 text-sm">When submitting this form, please also attach 3-5 photos of your products to the email that is generated. Please ensure the total size of your attachments is under 25MB to comply with Gmail's limit.</p>
                </div>

                 <div>
                    <label for="additional-info" class="form-label">Additional Information</label>
                    <textarea id="additional-info" name="Additional Info" rows="4" class="form-input" placeholder="Do you have any special requests? Will you be offering promotions for the grand opening?"></textarea>
                </div>
            </fieldset>

            <!-- Page 3: Agreement and Signature -->
             <fieldset class="space-y-6 pt-8 border-t" style="border-color: var(--accent-mauve);">
                <legend class="text-2xl font-bold mb-4 border-b-2" style="border-color: var(--accent-rose-gold);">Agreements & Signature</legend>
                <div>
                    <label for="rental-term" class="form-label">Rental Term Agreement</label>
                    <select id="rental-term" name="Rental Term" class="form-input" required>
                        <option value="vendor">Vendor: I agree to a minimum 6-month rental period.</option>
                        <option value="consigner">Consigner: Consignment Opportunity Only</option>
                    </select>
                </div>
                <div class="flex items-start">
                    <input type="checkbox" id="item-criteria" name="Item Criteria Agreement" class="h-5 w-5 mt-1 rounded text-rose-gold focus:ring-rose-gold" required>
                    <label for="item-criteria" class="ml-3">I understand that only handcrafted, vintage, new, or antique items are accepted.</label>
                </div>
                <div>
                    <label class="form-label">Terms and Conditions: Please Read All</label>
                    <div class="terms-box text-sm space-y-4">
                        <h4 class="font-bold">1. Booth Rental Terms</h4>
                        <p><strong>Rental Duration:</strong> Minimum Commitment: All vendors are required to sign a minimum 6-month rental agreement to ensure stability for their booth space and continuity for our customers.</p>
                        <p><strong>Renewal Options:</strong> After the initial 6-month term, vendors can renew their contract for a fixed period of 3, 6, or 12 months, allowing them to choose a term length that best suits their business needs...</p>
                        <p><strong>Non-Termination Policy:</strong> Vendors are required to uphold their commitment and cannot terminate the contract within the six-month period without incurring a penalty.</p>
                        <h4 class="font-bold">7. Liability and Insurance</h4>
                        <p>All vendors are required to carry their own liability insurance... The Heirloom Store is not liable for lost or damaged goods...</p>
                        <p class="font-bold">At The Heirloom Store, we are thrilled to welcome you into our vibrant community...</p>
                    </div>
                </div>
                 <div class="flex items-start">
                    <input type="checkbox" id="terms-agree" name="Terms Agreement" class="h-5 w-5 mt-1 rounded text-rose-gold focus:ring-rose-gold" required>
                    <label for="terms-agree" class="ml-3">By checking this box, I acknowledge that I have read, understood, and agree to the guidelines outlined in The Heirloom Store’s Vendor and Consignment Agreement.</label>
                </div>
                <div>
                    <label class="form-label">Applicant Signature</label>
                    <div class="signature-pad-container">
                       <canvas id="signature-pad" class="w-full h-48"></canvas>
                    </div>
                    <button type="button" id="clear-signature" class="text-sm mt-2" style="color: var(--accent-rose-gold);">Clear Signature</button>
                </div>
             </fieldset>
             
            <div>
                <button type="button" id="submit-mailto" class="w-full text-white font-bold py-3 px-6 rounded-lg hover:opacity-90 transition-opacity" style="background-color: var(--accent-rose-gold);">Prepare & Submit via Email</button>
                <p id="confirmation-message" class="text-center mt-4 text-green-700 font-bold hidden">Your email has been prepared! Please check your default email client to send the application.</p>
            </div>
        </div>
    </div>

    <script>
        // Signature Pad Logic
        const canvas = document.getElementById('signature-pad');
        const signaturePad = new SignaturePad(canvas, {
            backgroundColor: 'rgb(255, 255, 255)'
        });
        
        function resizeCanvas() {
            const ratio =  Math.max(window.devicePixelRatio || 1, 1);
            canvas.width = canvas.offsetWidth * ratio;
            canvas.height = canvas.offsetHeight * ratio;
            canvas.getContext("2d").scale(ratio, ratio);
            signaturePad.clear();
        }
        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        const clearButton = document.getElementById('clear-signature');
        clearButton.addEventListener('click', () => {
            signaturePad.clear();
        });

        // Mailto logic
        const submitButton = document.getElementById('submit-mailto');
        submitButton.addEventListener('click', () => {
            // 1. Validate required fields
            const requiredInputs = document.querySelectorAll('#application-form [required]');
            let allValid = true;
            requiredInputs.forEach(input => {
                if ((input.type === 'checkbox' && !input.checked) || (input.type !== 'checkbox' && !input.value)) {
                    allValid = false;
                    input.classList.add('border-red-500');
                } else {
                    input.classList.remove('border-red-500');
                }
            });

            if (signaturePad.isEmpty()) {
                allValid = false;
                canvas.closest('.signature-pad-container').style.borderColor = 'red';
            } else {
                 canvas.closest('.signature-pad-container').style.borderColor = 'var(--accent-mauve)';
            }
            
            if (!allValid) {
                alert('Please fill out all required fields and provide a signature.');
                return;
            }

            // 2. Gather form data
            const formElements = document.querySelectorAll('#application-form [name]');
            let emailBody = "New Vendor/Consignment Application:\n\n";
            formElements.forEach(el => {
                if (el.type === 'checkbox') {
                    emailBody += `${el.name}: ${el.checked ? 'Agreed' : 'Not Agreed'}\n`;
                } else if (el.value) {
                    emailBody += `${el.name}: ${el.value}\n`;
                }
            });

            emailBody += "\nSignature: Attached as image in email body (if supported by client) or see data URL below.\n";
            emailBody += signaturePad.toDataURL(); // Add signature data URL as fallback

            // 3. Construct mailto link
            const recipient = "Support@theheirloomstore.com";
            const subject = "New Vendor Application from The Heirloom Store Website";
            const mailtoLink = `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;

            // 4. Trigger email client
            window.location.href = mailtoLink;

            // 5. Show confirmation
            document.getElementById('confirmation-message').classList.remove('hidden');
        });
    </script>
</body>
</html>
